(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{120:function(e,t,a){},122:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(0),c=a.n(n),s=a(19),i=a.n(s),d={start:new Date(2020,7,1),end:new Date(2020,7,2)},o=a(108),u=a(14),l=a(37),j=(a(120),"CHANGE_DATE"),b="PAUSED",O="CANSEL_PAUSED",f="ERROR_GET_DATA",x="CLEAR_ERROR_DATA",p="CHANGE_COUNT_ROW",h="CHANGE_REFRESH_DATA",_=a(36),v=a.n(_),y=a(181),m=a(180),g=a(107),E=a(182),A=a(177);a(122);function T(){var e=Object(u.c)((function(e){return e.filter.countRowTable})),t=Object(u.b)(),a=function(){t(e!==1/0?{type:p,payload:1/0}:{type:p,payload:10})};return Object(r.jsxs)("div",{className:"header-inputNumber-cont-first",children:[Object(r.jsxs)("div",{style:{display:e===1/0?"none":"block"},children:[Object(r.jsx)("label",{for:"countRowTable",className:"header-inputNumber-cont-first-label",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435"}),Object(r.jsx)(y.a,{min:10,step:10,id:"countRowTable",value:e,onChange:function(e){e&&t({type:p,payload:Number(e)})}})]}),Object(r.jsxs)("div",{className:"chekLimited",children:[e!==1/0&&Object(r.jsx)(m.a,{name:"countRows_zero",value:e,onChange:a,children:Object(r.jsx)("span",{children:"\u041b\u044e\u0431\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"})}),e===1/0&&Object(r.jsx)(g.a,{type:"primary",style:{marginTop:"40px",marginBottom:"40px"},onClick:a,children:Object(r.jsx)("span",{children:"\u0417\u0430\u0434\u0430\u0442\u044c \u043b\u0438\u043c\u0438\u0442 \u0437\u0430\u043f\u0438\u0441\u0435\u0439"})})]})]})}function D(){return Object(r.jsxs)("div",{className:"header-inputNumber-cont",children:[Object(r.jsx)(T,{}),Object(r.jsx)(S,{})]})}function S(){var e=Object(u.c)((function(e){return e.filter.delay_refresh_data})),t=Object(u.b)();return Object(r.jsxs)("div",{className:"header-inputNumber-cont-first",children:[Object(r.jsx)("label",{for:"delay_refresh_data",className:"header-inputNumber-cont-first-label",children:"\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u0432\u044b\u0432\u043e\u0434\u0430 \u0432 \u043c\u0438\u043b\u043b\u0435\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445"}),Object(r.jsx)(y.a,{min:500,step:100,id:"delay_refresh_data",value:e,onChange:function(e){e&&t({type:h,payload:e})}})]})}function w(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.errors.error_messages}));return Object(r.jsx)(r.Fragment,{children:t.map((function(t,a){return Object(r.jsx)(E.a,{message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0434\u0430\u0442\u0443 "+t.date+", \u043a\u043e\u0434 \u043e\u0448\u0438\u0431\u043a\u0438: "+t.textError,type:"error",closable:!0,onClose:function(){!function(t){e({type:x,payload:t})}(a)}})}))})}function k(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{style:{textAlign:"center"},children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0432\u0430\u043b\u044e\u0442 \u0437\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434:"}),Object(r.jsx)(N,{}),Object(r.jsx)(D,{}),Object(r.jsx)(w,{}),Object(r.jsx)(R,{})]})}function N(){var e=Object(u.c)((function(e){return e.filter.start})),t=Object(u.c)((function(e){return e.filter.end})),a=Object(u.c)((function(e){return e.data.loading})),n=Object(u.b)();return Object(r.jsxs)("div",{className:"header-dates-cont",children:[Object(r.jsx)("label",{for:"start",className:"header-dates-cont-label",children:"\u041d\u0430\u0447\u0430\u043b\u043e"}),Object(r.jsx)(A.a,{disabled:a,placeholder:"\u041d\u0430\u0447\u0430\u043b\u043e",id:"start",format:"DD-MM-YYYY",style:{widthMax:"20%"},value:""===e?"":v()(e),onChange:function(e,t){n({type:j,payload:{id_period:"start",value:null===e?"":e._d}})}}),Object(r.jsx)("label",{for:"start",className:"header-dates-cont-label",style:{marginLeft:"20px"},children:"\u041a\u043e\u043d\u0435\u0446"}),Object(r.jsx)(A.a,{disabled:a,placeholder:"\u041a\u043e\u043d\u0435\u0446",id:"end",format:"DD-MM-YYYY",style:{widthMax:"20%"},value:""===t?"":v()(t),onChange:function(e,t){n({type:j,payload:{id_period:"end",value:null===e?"":e._d}})}})]})}function R(){var e=Object(u.c)((function(e){return e.filter.start})),t=Object(u.c)((function(e){return e.filter.end})),a=Object(u.c)((function(e){return e.data.loading})),n=Object(u.c)((function(e){return e.flow_control.paused})),c=Object(u.c)((function(e){return e.data.requestData})),s=Object(u.b)();return Object(r.jsx)("div",{className:"header-buttons-cont",children:Object(r.jsxs)(g.a,{type:"primary",style:{marginTop:"40px",marginBottom:"40px"},onClick:function(){""!==e&&""!==t&&(a||n?a&&!n?s({type:b}):a&&n&&s({type:O}):s({type:"START_GET_DATA",payload:{start:e,end:t}}))},disabled:""===e||""===t||!c,children:[!a&&!n&&"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435... ",a&&!n&&"\u041f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c... ",a&&n&&"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c... "]})})}a(169);var C={width:"30%"};function U(){return Object(r.jsxs)("div",{className:"row-table row-table-header",children:[Object(r.jsx)("div",{children:" \u0414\u0430\u0442\u0430 "}),Object(r.jsx)("div",{children:" \u2116 \u043f/\u043f"}),Object(r.jsx)("div",{children:" ID "}),Object(r.jsx)("div",{children:" \u041a\u043e\u0434 "}),Object(r.jsx)("div",{children:" \u041a\u043e\u0434(\u0441\u0438\u043c\u0432) "}),Object(r.jsx)("div",{children:" \u041d\u043e\u043c\u0438\u043d\u0430\u043b "}),Object(r.jsx)("div",{style:C,children:" \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "}),Object(r.jsx)("div",{children:" \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 "}),Object(r.jsx)("div",{children:" \u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0435 "})]})}var F={width:"30%",textAlign:"left"};function G(e){var t=e.index,a=Object(u.c)((function(e){return Object.keys(e.data.data_obj).length}));return Object(r.jsxs)(r.Fragment,{children:[" ",a-t]})}function I(e){var t=e.id_obj,a=e.index,n=Object(u.c)((function(e){return e.data.data_obj[t]}));if(void 0===n)return null;console.log(n);var c=n.ID,s=n.NumCode,i=n.CharCode,d=n.Nominal,o=n.Name,l=n.Value,j=n.Previous,b=n.start;return Object(r.jsxs)("div",{className:"row-table animation",children:[Object(r.jsxs)("div",{children:[" ",b.toLocaleDateString()," "]}),Object(r.jsxs)("div",{children:[" ",Object(r.jsx)(G,{index:a})]}),Object(r.jsxs)("div",{children:[" ",c," "]}),Object(r.jsxs)("div",{children:[" ",s," "]}),Object(r.jsxs)("div",{children:[" ",i," "]}),Object(r.jsxs)("div",{children:[" ",d," "]}),Object(r.jsx)("div",{style:F,children:o}),Object(r.jsxs)("div",{children:[" ",l," "]}),Object(r.jsxs)("div",{children:[" ",j," "]})]})}var H=c.a.memo(I);var Y=function(){var e=Object(u.c)((function(e){return e.data.data_arr}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{}),Object(r.jsx)("div",{className:"table-data-main",style:{overflow:"auto",width:"100%",height:"400px"},children:Object(r.jsx)("div",{className:"table-data-data",children:e.map((function(e,t){return Object(r.jsx)(H,{id_obj:e,index:t})}))})})]})};a(170);function M(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(k,{}),Object(r.jsx)("div",{className:"data_modeling_cont",children:Object(r.jsx)(Y,{})})]})}var Q=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(M,{})})},L=a(56),V=a(12),q={data_arr:[],data_obj:{},requestData:!0,loading:!1},P={paused:!1},B=a(70),J={start:d.end,end:d.end,countRowTable:10,delay_refresh_data:1e3},z={error_messages:[]},W=Object(l.c)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_GET_DATA":return Object(V.a)(Object(V.a)({},e),{},{loading:!0,requestData:!0});case"REQUEST_DATA":return Object(V.a)(Object(V.a)({},e),{},{requestData:!1});case"REQUEST_DATA_FINISHED":return Object(V.a)(Object(V.a)({},e),{},{requestData:!0});case"SUCCESS_GET_DATA":return t.payload.data_arr.length&&e.data_arr.push(t.payload.data_arr[0]),Object(V.a)(Object(V.a)({},e),{},{loading:t.payload.loading,data_arr:Object(L.a)(e.data_arr),data_obj:Object(V.a)(Object(V.a)({},e.data_obj),t.payload.data_obj)});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case j:return Object(V.a)(Object(V.a)({},e),{},Object(B.a)({},t.payload.id_period,t.payload.value));case p:return Object(V.a)(Object(V.a)({},e),{},{countRowTable:t.payload});case h:return Object(V.a)(Object(V.a)({},e),{},{delay_refresh_data:t.payload});default:return e}},flow_control:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(V.a)(Object(V.a)({},e),{},{paused:!0});case O:return Object(V.a)(Object(V.a)({},e),{},{paused:!1});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(V.a)(Object(V.a)({},e),{},{error_messages:[].concat(Object(L.a)(e.error_messages),[t.payload])});case x:return e.error_messages.splice(t.payload,1),Object(V.a)(Object(V.a)({},e),{},{error_messages:Object(L.a)(e.error_messages)});default:return e}}}),K=(a(171),a(33)),X=a.n(K),Z=a(105),$=a(13),ee=a(178),te=X.a.mark(ie),ae=X.a.mark(de),re=X.a.mark(oe);function ne(e,t,a){return ce.apply(this,arguments)}function ce(){return(ce=Object(Z.a)(X.a.mark((function e(t,a,r){var n,c,s,i,d;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=String(a),r=String(r),n={},e.prev=3,e.next=6,fetch("https://www.cbr-xml-daily.ru/archive/".concat(t,"/").concat(a.padStart(2,"0"),"/").concat(r.padStart(2,"0"),"/daily_json.js"));case 6:return c=e.sent,e.next=9,c.json();case 9:n=e.sent,s=Object.values(n.Valute).sort((function(e,t){if(e.Name>t.Name)return-1})),i={},s.forEach((function(e){i[e.CharCode]=e})),n.Valute=i,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),d=String(r).padStart(2,"0")+"."+String(a).padStart(2,"0")+"."+String(t).padStart(4,"0"),n.error_message={date:d,textError:e.t0};case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}function se(e,t){var a={};return a[Object(ee.a)()]=e,{data_arr:Object.keys(a),data_obj:a,loading:t}}function ie(){var e,t,a,r,n;return X.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object($.e)((function(e){return e.filter}));case 2:return e=c.sent,t=e.start,a=e.end,t=new Date(+t),a=new Date(+a),c.next=9,Object($.d)({type:"REQUEST_DATA"});case 9:r=X.a.mark((function e(){var r,n,c,s,i,d,o,u;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.e)((function(e){return e.data.data_arr.length}));case 2:return r=e.sent,e.next=5,Object($.e)((function(e){return e.filter.countRowTable}));case 5:return n=e.sent,e.next=8,Object($.e)((function(e){return e.filter.delay_refresh_data}));case 8:return c=e.sent,e.next=11,Object($.c)(c);case 11:if(!(r>n)){e.next=17;break}return e.next=14,Object($.d)({type:"REQUEST_DATA_FINISHED"});case 14:return e.next=16,Object($.d)({type:"SUCCESS_GET_DATA",payload:{data_arr:[],data_obj:{},loading:!1}});case 16:return e.abrupt("return","break");case 17:return e.next=19,Object($.b)(ne,t.getFullYear(),t.getMonth()+1,t.getDate());case 19:if(!(s=e.sent).error_message){e.next=26;break}return console.log("======================================="),e.next=24,Object($.d)({type:"ERROR_GET_DATA",payload:s.error_message});case 24:return t.setDate(t.getDate()+1),e.abrupt("return","continue");case 26:if(!(Object.keys(s.Valute).length>0)){e.next=65;break}i={},Object.keys(s.Valute).forEach((function(e){i[e]=s.Valute[e],i[e].start=new Date(+t)})),d=0,o=Object.keys(i).length,e.t0=X.a.keys(i);case 32:if((e.t1=e.t0()).done){e.next=63;break}return u=e.t1.value,d+=1,e.next=37,Object($.e)((function(e){return e.filter.countRowTable}));case 37:if(n=e.sent,!(r+d>n)){e.next=45;break}if(1!==d){e.next=42;break}return e.next=42,Object($.d)({type:"REQUEST_DATA_FINISHED"});case 42:return e.next=44,Object($.d)({type:"SUCCESS_GET_DATA",payload:{data_arr:[],data_obj:{},loading:!1}});case 44:return e.abrupt("break",63);case 45:return e.next=47,Object($.e)((function(e){return e.filter.delay_refresh_data}));case 47:return c=e.sent,e.next=50,Object($.c)(c);case 50:return e.next=52,Object($.e)((function(e){return e.flow_control.paused}));case 52:if(!e.sent){e.next=56;break}return e.next=56,Object($.f)("CANSEL_PAUSED");case 56:return e.next=58,Object($.d)({type:"SUCCESS_GET_DATA",payload:se(i[u],+t!==+a||d!==o)});case 58:if(1!==d){e.next=61;break}return e.next=61,Object($.d)({type:"REQUEST_DATA_FINISHED"});case 61:e.next=32;break;case 63:e.next=65;break;case 65:t.setDate(t.getDate()+1);case 66:case"end":return e.stop()}}),e)}));case 10:if(!(t<=a)){c.next=19;break}return c.delegateYield(r(),"t0",12);case 12:if("break"!==(n=c.t0)){c.next=15;break}return c.abrupt("break",19);case 15:if("continue"!==n){c.next=17;break}return c.abrupt("continue",10);case 17:c.next=10;break;case 19:return c.next=21,Object($.e)((function(e){return e.data.loading}));case 21:if(!c.sent){c.next=27;break}return c.next=25,Object($.d)({type:"REQUEST_DATA_FINISHED"});case 25:return c.next=27,Object($.d)({type:"SUCCESS_GET_DATA",payload:{data_arr:[],data_obj:{},loading:!1}});case 27:case"end":return c.stop()}}),te)}function de(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.g)("START_GET_DATA",ie);case 2:case"end":return e.stop()}}),ae)}function oe(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.a)([de()]);case 2:case"end":return e.stop()}}),re)}var ue=oe,le=Object(o.a)(ue),je=document.getElementById("root"),be=Object(l.e)(W,Object(l.a)(le));le.run(ue),i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(u.a,{store:be,children:Object(r.jsx)(Q,{})})}),je),console.log("Hellow1")}},[[172,1,2]]]);
//# sourceMappingURL=main.86aa0b6e.chunk.js.map